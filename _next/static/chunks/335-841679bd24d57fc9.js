"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{2846:function(t,e,n){n.d(e,{Z:function(){return B}});var r=n(6447),i=n(7294),o=n(8307),a=n(948),s=n(1796),c=n(8462),u=n(7212),f=n(8619),l=n(9334),p=n(8780),h=n(326),d=n(2293),m=n(7357),x=n(7533),g=n(155),v=n(5861),y=n(3156),j=n(1057),b=n(7241),Z=n(1163),w=n(5449),C=n(787),k=n(3946),_=n(2761),O=n(5893),P=(0,a.ZP)("div")(function(t){var e=t.theme;return(0,o.Z)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,s.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,s.Fq)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"})}),S=(0,a.ZP)("div")(function(t){return{padding:t.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),A=(0,a.ZP)(C.ZP)(function(t){var e=t.theme;return{color:"inherit","& .MuiInputBase-input":(0,o.Z)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}}),E=[{name:"首页",path:"/"},{name:"文稿",path:"/articles"},{name:"音乐",path:"/music"},{name:"图库",path:"/gallery"}];function D(){var t=(0,Z.useRouter)(),e=(0,i.useState)(""),n=e[0],o=e[1],a=(0,i.useState)(!1),s=a[0],C=a[1],D=function(){C(!s)},I=(0,O.jsx)(m.Z,{onClick:D,sx:{textAlign:"center"},children:(0,O.jsx)(c.Z,{children:E.map(function(t){return(0,O.jsx)(u.ZP,{disablePadding:!0,children:(0,O.jsx)(f.Z,{sx:{textAlign:"center"},href:t.path,target:"_blank",children:(0,O.jsx)(l.Z,{primary:t.name})})},t.name)})})});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(d.Z,{position:"static",children:(0,O.jsx)(y.Z,{maxWidth:"xl",children:(0,O.jsxs)(g.Z,{disableGutters:!0,children:[(0,O.jsxs)(r.Z,{sx:{position:"relative",ml:1,transform:"translateY(4px)"},children:[(0,O.jsx)(p.Z,{sx:{width:20,position:"absolute",bottom:"50%",left:"50%",transform:"translateX(-50%)"}}),(0,O.jsx)(b.Z,{})]}),(0,O.jsx)(v.Z,{variant:"h6",noWrap:!0,component:"a",sx:{ml:1,mr:2,fontWeight:700,letterSpacing:".3rem",textDecoration:"none",cursor:"pointer"},style:{color:"white"},href:"/",onClick:function(){return t.push("/")},children:"和谐历史档案馆"}),(0,O.jsxs)(P,{sx:{display:{xs:"none",sm:"none",md:"flex",lg:"flex",xl:"flex"}},children:[(0,O.jsx)(S,{children:(0,O.jsx)(_.Z,{})}),(0,O.jsx)(A,{placeholder:"全站搜索",onKeyDown:function(e){if("Enter"===e.key){if("localhost"===location.hostname){t.push({pathname:"/search/[keyword]",query:{keyword:n}});return}window.open("https://www.google.com/search?q="+encodeURIComponent("site:banned-historical-archives.github.io "+n),"_blank")}},value:n,onChange:function(t){return o(t.target.value)},inputProps:{"aria-label":"search"}})]}),(0,O.jsx)(r.Z,{sx:{flex:1}}),(0,O.jsxs)(r.Z,{sx:{display:{xs:"none",sm:"flex"}},direction:"row",justifyContent:"flex-end",children:[E.map(function(e){var n=e.name,r=e.path;return(0,O.jsx)(j.Z,{sx:{color:"white"},onClick:function(){return t.push(r)},children:n},r)}),(0,O.jsxs)(j.Z,{href:"https://github.com/banned-historical-archives/banned-historical-archives.github.io/issues",target:"_blank",sx:{color:"white"},children:[(0,O.jsx)(w.Z,{sx:{mr:1}}),"讨论"]})]}),(0,O.jsx)(k.Z,{size:"small",edge:"start",color:"inherit","aria-label":"menu",sx:{display:{xs:"flex",sm:"none"}},onClick:D,children:(0,O.jsx)(h.Z,{})})]})})}),(0,O.jsx)(m.Z,{component:"nav",children:(0,O.jsx)(x.ZP,{variant:"temporary",anchor:"right",open:s,onClose:D,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:I})})]})}function I(){return null}var R=n(8078);function B(t){var e=t.children,n=(0,i.useState)(!1),o=n[0],a=n[1],s=(0,Z.useRouter)();return(0,i.useEffect)(function(){var t=function(t){a(!0)},e=function(){a(!1)};return s.events.on("routeChangeStart",t),s.events.on("routeChangeComplete",e),s.events.on("routeChangeError",e),function(){s.events.off("routeChangeStart",t),s.events.off("routeChangeComplete",e),s.events.off("routeChangeError",e)}},[s]),(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(r.Z,{sx:{position:"absolute",height:"100%",width:"100%"},direction:"column",children:[(0,O.jsx)(D,{}),o?(0,O.jsxs)(r.Z,{spacing:1,p:2,children:[(0,O.jsx)(R.Z,{variant:"text",sx:{fontSize:"1rem"}}),(0,O.jsx)(R.Z,{variant:"rectangular",height:60}),(0,O.jsx)(R.Z,{variant:"rectangular",height:60}),(0,O.jsx)(R.Z,{variant:"rectangular",height:60}),(0,O.jsx)(R.Z,{variant:"rectangular",height:60})]}):(0,O.jsx)("main",{style:{flex:1,position:"relative",overflow:"hidden"},children:e}),(0,O.jsx)(I,{})]})})}},5158:function(t,e,n){n.d(e,{Az:function(){return x},Pc:function(){return d},bd:function(){return v},oD:function(){return g},oW:function(){return h}});var r=n(6835),i=n(8307),o=n(7812);n(4687);var a=n(2027),s=n(2474),c=n.n(s);function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){(0,i.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var h="〔",d="〕";function m(t,e){for(var n=[],r=new RegExp("".concat(h,"\\d+").concat(d));;){var i=t.search(r);if(-1==i)break;var o=parseInt(t.match(r)[0].substr(1));t=t.replace(r,""),n.push({part_idx:e,offset:i,index:o})}return[n,t]}function x(t,e){var n=t.parts,i=t.comment_pivots,s=t.comments,c=[],f=[],l=[];for(var x in n)!function(){var t=parseInt(x);if(e.parts[x]){if(e.parts[x].insertBefore){var s,f=u(e.parts[x].insertBefore);try{for(f.s();!(s=f.n()).done;){var g=s.value,v=m(g.text,c.length),y=(0,r.Z)(v,2),j=y[0],b=y[1];c.push({type:g.type,text:b}),l.push.apply(l,(0,o.Z)(j))}}catch(t){f.e(t)}finally{f.f()}}if(!e.parts[x].delete){var Z=n[x].text;if(e.parts[x].diff){var w=Array.from(n[t].text);i.filter(function(e){return e.part_idx===t}).sort(function(t,e){return e.index-t.index}).forEach(function(t){return w.splice(t.offset,0,"".concat(h).concat(t.index).concat(d))});var C=w.join("");Z=new a.diff_match_patch().diff_fromDelta(C,e.parts[x].diff).filter(function(t){return -1!==t[0]}).map(function(t){return t[1]}).join("")}var k=m(Z,c.length),_=(0,r.Z)(k,2),O=_[0],P=_[1];c.push({type:e.parts[x].type||n[x].type,text:P}),l.push.apply(l,(0,o.Z)(O))}if(e.parts[x].insertAfter){var S,A=u(e.parts[x].insertAfter);try{for(A.s();!(S=A.n()).done;){var E=S.value,D=m(E.text,c.length),I=(0,r.Z)(D,2),R=I[0],B=I[1];c.push({type:E.type,text:B}),l.push.apply(l,(0,o.Z)(R))}}catch(t){A.e(t)}finally{A.f()}}}else l.push.apply(l,(0,o.Z)(i.filter(function(e){return e.part_idx===t}).map(function(t){return p(p({},t),{},{part_idx:c.length})}))),c.push(n[x])}();if(e.newComments&&e.newComments.length)f.push.apply(f,(0,o.Z)(e.newComments));else for(var g in s){var v=parseInt(g)+1;if(e.comments[v]){if(e.comments[v].insertBefore&&f.push.apply(f,(0,o.Z)(e.comments[v].insertBefore.map(function(t){return t.text}))),!e.comments[v].delete){var y=e.comments[v].diff?new a.diff_match_patch().diff_fromDelta(s[g],e.comments[v].diff).filter(function(t){return -1!==t[0]}).map(function(t){return t[1]}).join(""):s[g];f.push(y)}e.comments[v].insertAfter&&f.push.apply(f,(0,o.Z)(e.comments[v].insertAfter.map(function(t){return t.text})))}else f.push(t.comments[g])}var j=p({},t);return j.comments=f,j.parts=c,j.comment_pivots=l,"string"==typeof e.description?e.description.length&&(j.description=new a.diff_match_patch().diff_fromDelta(t.description||"",e.description).filter(function(t){return -1!==t[0]}).map(function(t){return t[1]}).join("")):j.description="",j}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00";return t||0===t?t<10?"0".concat(t):t:e}function v(t){return c().createHash("md5").update(t).digest("hex")}}}]);