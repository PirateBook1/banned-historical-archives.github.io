(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{4229:function(e,n,t){"use strict";var r=t(4836);n.Z=void 0;var i=r(t(4938)),o=t(5893),a=(0,i.default)((0,o.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");n.Z=a},1333:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(7918),i=t(5893);function o(e){var n=e.authors;return(0,i.jsx)(i.Fragment,{children:n.map(function(e){return(0,i.jsx)(r.Z,{onClick:function(){return window.open("/articles?author=".concat(encodeURIComponent(e)),"_blank")},sx:{m:.3},label:e},e)})})}},2846:function(e,n,t){"use strict";t.d(n,{Z:function(){return R}});var r=t(6447),i=t(7294),o=t(8307),a=t(948),s=t(1796),l=t(8462),c=t(7212),u=t(8619),d=t(9334),h=t(8780),f=t(326),x=t(2293),p=t(7357),m=t(7533),g=t(155),j=t(5861),b=t(3156),v=t(1057),Z=t(7241),y=t(1163),w=t(5449),_=t(787),C=t(3946),k=t(2761),S=t(5893),D=(0,a.ZP)("div")(function(e){var n=e.theme;return(0,o.Z)({position:"relative",borderRadius:n.shape.borderRadius,backgroundColor:(0,s.Fq)(n.palette.common.white,.15),"&:hover":{backgroundColor:(0,s.Fq)(n.palette.common.white,.25)},marginRight:n.spacing(2),marginLeft:0,width:"100%"},n.breakpoints.up("sm"),{marginLeft:n.spacing(3),width:"auto"})}),F=(0,a.ZP)("div")(function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),P=(0,a.ZP)(_.ZP)(function(e){var n=e.theme;return{color:"inherit","& .MuiInputBase-input":(0,o.Z)({padding:n.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(n.spacing(4),")"),transition:n.transitions.create("width"),width:"100%"},n.breakpoints.up("md"),{width:"20ch"})}}),M=[{name:"首页",path:"/"},{name:"文稿",path:"/articles"},{name:"音乐",path:"/music"},{name:"图库",path:"/gallery"}];function E(){var e=(0,y.useRouter)(),n=(0,i.useState)(""),t=n[0],o=n[1],a=(0,i.useState)(!1),s=a[0],_=a[1],E=function(){_(!s)},O=(0,S.jsx)(p.Z,{onClick:E,sx:{textAlign:"center"},children:(0,S.jsx)(l.Z,{children:M.map(function(e){return(0,S.jsx)(c.ZP,{disablePadding:!0,children:(0,S.jsx)(u.Z,{sx:{textAlign:"center"},href:e.path,target:"_blank",children:(0,S.jsx)(d.Z,{primary:e.name})})},e.name)})})});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x.Z,{position:"static",children:(0,S.jsx)(b.Z,{maxWidth:"xl",children:(0,S.jsxs)(g.Z,{disableGutters:!0,children:[(0,S.jsxs)(r.Z,{sx:{position:"relative",ml:1,transform:"translateY(4px)"},children:[(0,S.jsx)(h.Z,{sx:{width:20,position:"absolute",bottom:"50%",left:"50%",transform:"translateX(-50%)"}}),(0,S.jsx)(Z.Z,{})]}),(0,S.jsx)(j.Z,{variant:"h6",noWrap:!0,component:"a",sx:{ml:1,mr:2,fontWeight:700,letterSpacing:".3rem",textDecoration:"none",cursor:"pointer"},style:{color:"white"},href:"/",onClick:function(){return e.push("/")},children:"和谐历史档案馆"}),(0,S.jsxs)(D,{sx:{display:{xs:"none",sm:"none",md:"flex",lg:"flex",xl:"flex"}},children:[(0,S.jsx)(F,{children:(0,S.jsx)(k.Z,{})}),(0,S.jsx)(P,{placeholder:"全站搜索",onKeyDown:function(n){if("Enter"===n.key){if("localhost"===location.hostname){e.push({pathname:"/search/[keyword]",query:{keyword:t}});return}window.open("https://www.google.com/search?q="+encodeURIComponent("site:banned-historical-archives.github.io "+t),"_blank")}},value:t,onChange:function(e){return o(e.target.value)},inputProps:{"aria-label":"search"}})]}),(0,S.jsx)(r.Z,{sx:{flex:1}}),(0,S.jsxs)(r.Z,{sx:{display:{xs:"none",sm:"flex"}},direction:"row",justifyContent:"flex-end",children:[M.map(function(n){var t=n.name,r=n.path;return(0,S.jsx)(v.Z,{sx:{color:"white"},onClick:function(){return e.push(r)},children:t},r)}),(0,S.jsxs)(v.Z,{href:"https://github.com/banned-historical-archives/banned-historical-archives.github.io/issues",target:"_blank",sx:{color:"white"},children:[(0,S.jsx)(w.Z,{sx:{mr:1}}),"讨论"]})]}),(0,S.jsx)(C.Z,{size:"small",edge:"start",color:"inherit","aria-label":"menu",sx:{display:{xs:"flex",sm:"none"}},onClick:E,children:(0,S.jsx)(f.Z,{})})]})})}),(0,S.jsx)(p.Z,{component:"nav",children:(0,S.jsx)(m.ZP,{variant:"temporary",anchor:"right",open:s,onClose:E,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:O})})]})}function O(){return null}var A=t(8078);function R(e){var n=e.children,t=(0,i.useState)(!1),o=t[0],a=t[1],s=(0,y.useRouter)();return(0,i.useEffect)(function(){var e=function(e){a(!0)},n=function(){a(!1)};return s.events.on("routeChangeStart",e),s.events.on("routeChangeComplete",n),s.events.on("routeChangeError",n),function(){s.events.off("routeChangeStart",e),s.events.off("routeChangeComplete",n),s.events.off("routeChangeError",n)}},[s]),(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(r.Z,{sx:{position:"absolute",height:"100%",width:"100%"},direction:"column",children:[(0,S.jsx)(E,{}),o?(0,S.jsxs)(r.Z,{spacing:1,p:2,children:[(0,S.jsx)(A.Z,{variant:"text",sx:{fontSize:"1rem"}}),(0,S.jsx)(A.Z,{variant:"rectangular",height:60}),(0,S.jsx)(A.Z,{variant:"rectangular",height:60}),(0,S.jsx)(A.Z,{variant:"rectangular",height:60}),(0,S.jsx)(A.Z,{variant:"rectangular",height:60})]}):(0,S.jsx)("main",{style:{flex:1,position:"relative",overflow:"hidden"},children:n}),(0,S.jsx)(O,{})]})})}},3146:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(7918),i=t(5861),o=t(7294),a=t(4564),s=t(5893);function l(e){var n=e.tags,t=(0,o.useState)(null),l=t[0],c=t[1],u=(0,o.useState)(""),d=u[0],h=u[1],f=function(){c(null)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.ZP,{open:!!l,anchorEl:l,disableRestoreFocus:!0,sx:{pointerEvents:"none"},anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,s.jsx)(i.Z,{sx:{p:2},children:d})}),n.map(function(e){return(0,s.jsx)(r.Z,{onMouseEnter:function(n){h(e.type),c(n.currentTarget)},onMouseLeave:f,onClick:function(){return window.open("/articles?tag=".concat(encodeURIComponent(e.name)),"_blank")},sx:{m:.3},label:e.name},e.type+"##"+e.name)})]})}},2946:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return K},default:function(){return J}});var r=t(7294),i=t(4564),o=t(9008),a=t.n(o),s=t(8259),l=t(7713),c=t(2846),u=t(6886),d=t(1057),h=t(7918),f=t(6447),x=t(4229),p=t(5861),m=t(3146),g=t(1333),j=t(8307),b=t(3366),v=t(7462),Z=t(6010),y=t(4780),w=t(948),_=t(1657),C=t(1588),k=t(4867);function S(e){return(0,k.Z)("MuiDialogActions",e)}(0,C.Z)("MuiDialogActions",["root","spacing"]);var D=t(5893);let F=["className","disableSpacing"],P=e=>{let{classes:n,disableSpacing:t}=e;return(0,y.Z)({root:["root",!t&&"spacing"]},S,n)},M=(0,w.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})(({ownerState:e})=>(0,v.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),E=r.forwardRef(function(e,n){let t=(0,_.Z)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=t,o=(0,b.Z)(t,F),a=(0,v.Z)({},t,{disableSpacing:i}),s=P(a);return(0,D.jsx)(M,(0,v.Z)({className:(0,Z.Z)(s.root,r),ownerState:a,ref:n},o))});function O(e){return(0,k.Z)("MuiDialogContent",e)}(0,C.Z)("MuiDialogContent",["root","dividers"]);var A=t(4472);let R=["className","dividers"],z=e=>{let{classes:n,dividers:t}=e;return(0,y.Z)({root:["root",t&&"dividers"]},O,n)},N=(0,w.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e;return[n.root,t.dividers&&n.dividers]}})(({theme:e,ownerState:n})=>(0,v.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${A.Z.root} + &`]:{paddingTop:0}})),T=r.forwardRef(function(e,n){let t=(0,_.Z)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=t,o=(0,b.Z)(t,R),a=(0,v.Z)({},t,{dividers:i}),s=z(a);return(0,D.jsx)(N,(0,v.Z)({className:(0,Z.Z)(s.root,r),ownerState:a,ref:n},o))});var I=t(657),W=t(1903),L=t(7645);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach(function(n){(0,j.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var U={year_a:1800,year_b:2200,month_a:1,month_b:12,day_a:1,day_b:31};function X(e){var n=parseInt(e);if(!isNaN(n)&&n!=1/0&&n!=-1/0)return n}var B=["毛泽东","江青","王洪文","张春桥","姚文元"],$=t(7380),H=["毛泽东选集","毛泽东全集","毛泽东文集","中国文化大革命文库"];function Q(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||0===e?e<10?"0".concat(e):e:n}var Y=[{field:"title",headerName:"标题",minWidth:350,flex:1,renderCell:function(e){return(0,D.jsx)("a",{href:"/articles/".concat(e.row.id),rel:"noreferrer",target:"_blank",children:e.row.title})}},{field:"authors",headerName:"作者",minWidth:150,flex:1,valueGetter:function(e){return e.row.authors.map(function(e){return e}).join(",")},renderCell:function(e){return(0,D.jsx)("div",{style:{overflow:"visible"},children:(0,D.jsx)(g.Z,{authors:e.row.authors})})}},{field:"dates",headerName:"时间",description:"可能包含多个时间点（起草时间，发布时间，子文稿时间等）或时间段",minWidth:150,flex:1,valueGetter:function(e){return e.row.dates.map(function(e){return e?[e.year||"----",Q(e.month,"--"),Q(e.day,"--")].filter(function(e){return e}).join("/"):"----/--/--"}).join(" ")},renderCell:function(e){return(0,D.jsx)(f.Z,{spacing:1,children:e.row.is_range_date?(0,D.jsx)(p.Z,{variant:"caption",children:e.row.dates.map(function(e){return[e.year,Q(e.month),Q(e.day)].filter(function(e){return e}).join("/")}).sort(function(e,n){return e>n?1:-1}).join("至")}):e.row.dates.map(function(e){return[e.year,Q(e.month),Q(e.day)].filter(function(e){return e}).join("/")}).map(function(e){return(0,D.jsx)(p.Z,{variant:"caption",children:e},e)})})}},{field:"publications",headerName:"来源",flex:1,minWidth:150,valueGetter:function(e){return e.row.books.join(",")}},{field:"tags",headerName:"标签",minWidth:150,flex:1,sortComparator:function(e,n){return e>n?1:-1},valueGetter:function(e){return e.row.tags.map(function(e){return e.name}).join(",")},renderCell:function(e){return(0,D.jsx)("div",{style:{overflow:"visible"},children:(0,D.jsx)(m.Z,{tags:e.row.tags})})}}],K=!0;function J(e){var n,t,o,c,m,g,j,b,v,Z,y,w,_,C,k,S,F,P,M,O,A,R,z,N,G,Q,K,J,V,ee,en,et,er,ei,eo,ea,es,el,ec,eu,ed,eh,ef,ex,ep,em,eg,ej,eb,ev,eZ,ey,ew,e_,eC,ek,eS,eD,eF=e.catelog,eP=e.book_indexes,eM=e.tag_indexes,eE=(0,r.useState)(!1),eO=eE[0],eA=eE[1];(0,r.useEffect)(function(){eF.forEach(function(e){try{e.tags=e.tag_ids.map(function(e){return{type:eM[e][0],name:eM[e][1]}}),e.books=e.book_ids.map(function(e){return eP[e][1]})}catch(e){}}),eA(!0)},[eF,eP,eM]);var eR=(0,r.useMemo)(function(){var e=new Map;return eM.forEach(function(n,t){e.set(t.toString(),{type:n[0],name:n[1],id:t.toString()})}),e},[eM]),ez=(0,r.useMemo)(function(){var e=new Map;return eM.forEach(function(n,t){var r=n[0],i=n[1],o=t.toString();e.get(r)||e.set(r,new Map),e.get(r).set(o,{type:r,name:i,id:o})}),e},[eM]),eN=(0,r.useMemo)(function(){var e=new Set;return eF.forEach(function(n){return n.book_ids.forEach(function(n){return e.add(eP[n][1])})}),Array.from(e).sort()},[eF,eP]),eT=(0,r.useMemo)(function(){var e=new Set;return eF.forEach(function(n){return n.authors.forEach(function(n){return n&&e.add(n)})}),Array.from(e).sort()},[eF]),eI=(o=(t=(0,r.useState)(!1))[0],c=t[1],g=(m=(0,r.useState)(null))[0],j=m[1],b=Array.from((null===(n=ez.get($.Qy.articleType))||void 0===n?void 0:n.values())||[]),Z=(v=(0,r.useState)(b))[0],y=v[1],_=(w=(0,r.useState)(eR[Symbol.iterator]().next().value?eR[Symbol.iterator]().next().value[1].id:""))[0],C=w[1],k=(0,r.useCallback)(function(){return c(!1)},[]),S=(0,r.useCallback)(function(){y([].concat(b,[eR.get(_)])),j(_),c(!1)},[b,eR,_]),{TagDialog:(0,D.jsxs)(I.Z,{onClose:k,open:o,children:[(0,D.jsx)(L.Z,{children:"选择标签"}),(0,D.jsx)(T,{children:Array.from(ez.keys()).map(function(e){return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(p.Z,{variant:"body1",sx:{whiteSpace:"nowrap"},children:[e,"："]}),Array.from(ez.get(e).values()).map(function(e){return(0,D.jsx)(h.Z,{sx:{m:.5},onClick:function(){return C(e.id)},label:e.name,color:_===e.id?"primary":"default",variant:_===e.id?"filled":"outlined"},e.id)})]})})}),(0,D.jsxs)(E,{children:[(0,D.jsx)(d.Z,{onClick:k,children:"取消"}),(0,D.jsx)(d.Z,{onClick:S,autoFocus:!0,children:"确定"})]})]}),tagFilter:g,setTagDialog:c,setTagFilter:j,tags:Z}),eW=eI.TagDialog,eL=eI.tagFilter,eG=eI.setTagDialog,eq=eI.setTagFilter,eU=eI.tags,eX=(P=(F=(0,r.useState)(U))[0],M=F[1],A=(O=(0,r.useState)(q({show:!1},U)))[0],R=O[1],z=(0,r.useCallback)(function(e){return R(function(n){return q(q({},n),{},{day_a:X(e.target.value)})})},[]),N=(0,r.useCallback)(function(e){return R(function(n){return q(q({},n),{},{month_a:X(e.target.value)})})},[]),G=(0,r.useCallback)(function(e){return R(function(n){return q(q({},n),{},{day_b:X(e.target.value)})})},[]),Q=(0,r.useCallback)(function(e){return R(function(n){return q(q({},n),{},{month_b:X(e.target.value)})})},[]),K=(0,r.useCallback)(function(e){return R(function(n){return q(q({},n),{},{year_b:X(e.target.value)})})},[]),J=(0,r.useCallback)(function(e){return R(function(n){return q(q({},n),{},{year_a:X(e.target.value)})})},[]),V=(0,r.useCallback)(function(){return R(function(e){return q(q({},e),{},{show:!1})})},[]),ee=(0,r.useCallback)(function(){var e={};A.year_a&&A.year_b&&A.year_b>=A.year_a&&(e.year_a=A.year_a,e.year_b=A.year_b),A.month_a&&A.month_b&&A.month_a>=1&&A.month_a<=12&&A.month_b>=1&&A.month_b<=12&&(e.month_a=A.month_a,e.month_b=A.month_b),A.day_a&&A.day_b&&A.day_a>=1&&A.day_a<=31&&A.day_b>=1&&A.day_b<=31&&(e.day_a=A.day_a,e.day_b=A.day_b),e.year_a&&e.month_a&&e.day_a&&(R(function(e){return q(q({},e),{},{show:!1})}),M(function(n){return e}))},[A]),{DateFilterDialog:(0,D.jsxs)(I.Z,{onClose:V,open:A.show,children:[(0,D.jsx)(L.Z,{children:"时间过滤器"}),(0,D.jsx)(T,{children:(0,D.jsxs)(f.Z,{spacing:1,children:[(0,D.jsx)(p.Z,{variant:"subtitle1",children:"开始时间"}),(0,D.jsx)(W.Z,{label:"年",value:A.year_a,size:"small",onChange:J}),(0,D.jsx)(W.Z,{label:"月",value:A.month_a,size:"small",onChange:N}),(0,D.jsx)(W.Z,{label:"日",value:A.day_a,size:"small",onChange:z}),(0,D.jsx)(p.Z,{variant:"subtitle1",children:"结束时间"}),(0,D.jsx)(W.Z,{label:"年",value:A.year_b,size:"small",onChange:K}),(0,D.jsx)(W.Z,{label:"月",value:A.month_b,size:"small",onChange:Q}),(0,D.jsx)(W.Z,{label:"日",value:A.day_b,size:"small",onChange:G})]})}),(0,D.jsxs)(E,{children:[(0,D.jsx)(d.Z,{onClick:V,children:"取消"}),(0,D.jsx)(d.Z,{onClick:ee,autoFocus:!0,children:"确定"})]})]}),dateFilter:P,showDateFilterDialog:function(){return R(function(e){return q(q({},e),{},{show:!0})})}}),eB=eX.DateFilterDialog,e$=eX.dateFilter,eH=eX.showDateFilterDialog,eQ=(et=(en=(0,r.useState)(!1))[0],er=en[1],eo=(ei=(0,r.useState)(null))[0],ea=ei[1],el=(es=(0,r.useState)(B))[0],ec=es[1],ed=(eu=(0,r.useState)(eT[0]))[0],eh=eu[1],ef=(0,r.useCallback)(function(){return er(!1)},[]),ex=(0,r.useCallback)(function(){ec(Array.from(new Set([].concat(B,[ed])))),ea(ed),er(!1)},[ed]),{AuthorDialog:(0,D.jsxs)(I.Z,{onClose:ef,open:et,children:[(0,D.jsx)(L.Z,{children:"选择作者"}),(0,D.jsx)(T,{children:eT.map(function(e){return(0,D.jsx)(h.Z,{sx:{m:.5},onClick:function(){return eh(e)},label:e,color:ed===e?"primary":"default",variant:ed===e?"filled":"outlined"},e)})}),(0,D.jsxs)(E,{children:[(0,D.jsx)(d.Z,{onClick:ef,children:"取消"}),(0,D.jsx)(d.Z,{onClick:ex,autoFocus:!0,children:"确定"})]})]}),authorFilter:eo,setAuthorDialog:er,setAuthorFilter:ea,authors:el}),eY=eQ.authors,eK=eQ.authorFilter,eJ=eQ.setAuthorFilter,eV=eQ.AuthorDialog,e0=eQ.setAuthorDialog,e1=(em=(ep=(0,r.useState)(!1))[0],eg=ep[1],eb=(ej=(0,r.useState)(null))[0],ev=ej[1],ey=(eZ=(0,r.useState)(H))[0],ew=eZ[1],eC=(e_=(0,r.useState)(eN[0]))[0],ek=e_[1],eS=(0,r.useCallback)(function(){return eg(!1)},[]),eD=(0,r.useCallback)(function(){ew(Array.from(new Set([].concat(H,[eC])))),ev(eC),eg(!1)},[eC]),{SourceDialog:(0,D.jsxs)(I.Z,{onClose:eS,open:em,children:[(0,D.jsx)(L.Z,{children:"选择来源"}),(0,D.jsx)(T,{children:eN.map(function(e){return(0,D.jsx)(h.Z,{sx:{m:.5},onClick:function(){return ek(e)},label:e,color:eC===e?"primary":"default",variant:eC===e?"filled":"outlined"},e)})}),(0,D.jsxs)(E,{children:[(0,D.jsx)(d.Z,{onClick:eS,children:"取消"}),(0,D.jsx)(d.Z,{onClick:eD,autoFocus:!0,children:"确定"})]})]}),sourceFilter:eb,setSourceDialog:eg,setSourceFilter:ev,sources:ey}),e2=e1.sources,e4=e1.sourceFilter,e3=e1.setSourceFilter,e6=e1.SourceDialog,e5=e1.setSourceDialog,e9=(0,r.useState)(null),e8=e9[0],e7=e9[1],ne=function(e){e7(e.currentTarget)},nn=(0,r.useMemo)(function(){return eF.filter(function(e){return function(e,n){var t=1e4*n.year_a+100*n.month_a+n.day_a,r=1e4*n.year_b+100*n.month_b+n.day_b;if(!e.is_range_date)return e.dates.reduce(function(e,n){var i=1e4*n.year+100*(n.month||0)+(n.day||0);return e&&t<=i&&r>=i},!0);var i=1e4*e.dates[0].year+100*(e.dates[0].month||0)+(e.dates[0].day||0),o=1e4*e.dates[1].year+100*(e.dates[1].month||0)+(e.dates[1].day||0);return i>=t&&o<=r}(e,e$)}).filter(function(e){return!eK||!!e.authors.find(function(e){return e===eK})}).filter(function(e){return!e4||!!e.book_ids.find(function(e){return eP[e][1].indexOf(e4)>-1})}).filter(function(e){return!eL||!!e.tag_ids.find(function(e){return e.toString()===eL})})},[eF,e$,eL,eK,e4,eP]);return eO?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(a(),{children:(0,D.jsx)("title",{children:"和谐历史档案馆 Banned Historical Archives"})}),eB,eV,e6,eW,(0,D.jsxs)(f.Z,{p:2,spacing:2,sx:{position:"relative",flex:1,height:"100%"},children:[(0,D.jsx)(f.Z,{direction:"row",children:(0,D.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,D.jsx)(u.ZP,{item:!0,xs:12,md:5,children:(0,D.jsxs)(f.Z,{direction:"row",alignItems:"center",children:[(0,D.jsx)(p.Z,{variant:"body1",sx:{whiteSpace:"nowrap"},children:"时间范围："}),(0,D.jsx)(f.Z,{direction:"row",spacing:1,children:(0,D.jsx)(h.Z,{icon:(0,D.jsx)(x.Z,{fontSize:"small"}),onClick:function(){return eH()},label:["".concat(e$.year_a,"年"),"".concat(e$.month_a,"月"),"".concat(e$.day_a,"日")].join(" ")+" - "+["".concat(e$.year_b,"年"),"".concat(e$.month_b,"月"),"".concat(e$.day_b,"日")].join(" "),color:"primary",variant:"filled"})})]})}),(0,D.jsx)(u.ZP,{item:!0,xs:12,md:7,sx:{overflowX:"scroll"},children:(0,D.jsxs)(f.Z,{direction:"row",alignItems:"center",children:[(0,D.jsx)(p.Z,{variant:"body1",sx:{whiteSpace:"nowrap"},children:"标签："}),(0,D.jsxs)(f.Z,{direction:"row",spacing:1,children:[eU.map(function(e){var n=e.id,t=n==eL;return(0,D.jsx)(h.Z,{label:e.name,variant:t?"filled":"outlined",color:t?"primary":"default",onDelete:t?function(){return eq(null)}:void 0,onClick:function(e){eq(n)}},n)}),(0,D.jsx)(h.Z,{label:"更多",onClick:function(e){eG(!0)}})]})]})}),(0,D.jsx)(u.ZP,{item:!0,xs:12,md:5,sx:{overflowX:"scroll"},children:(0,D.jsxs)(f.Z,{direction:"row",alignItems:"center",children:[(0,D.jsx)(p.Z,{variant:"body1",children:"作者："}),(0,D.jsxs)(f.Z,{direction:"row",spacing:1,children:[eY.map(function(e){return(0,D.jsx)(h.Z,{label:e,variant:e==eK?"filled":"outlined",color:e==eK?"primary":"default",onDelete:e==eK?function(){return eJ(null)}:void 0,onClick:function(n){eJ(e)}},e)}),(0,D.jsx)(h.Z,{label:"更多",onClick:function(e){e0(!0)}})]})]})}),(0,D.jsx)(u.ZP,{item:!0,xs:12,md:6,sx:{overflowX:"scroll"},children:(0,D.jsxs)(f.Z,{direction:"row",alignItems:"center",children:[(0,D.jsx)(p.Z,{variant:"body1",sx:{whiteSpace:"nowrap"},children:"来源："}),(0,D.jsxs)(f.Z,{direction:"row",spacing:1,children:[e2.map(function(e){var n=e==e4;return(0,D.jsx)(h.Z,{label:e,variant:n?"filled":"outlined",color:n?"primary":"default",onDelete:n?function(){return e3(null)}:void 0,onClick:function(n){e3(e)}},e)}),(0,D.jsx)(h.Z,{label:"更多",onClick:function(e){e5(!0)}})]})]})}),(0,D.jsxs)(u.ZP,{item:!0,xs:1,md:1,sx:{display:{md:"flex",xs:"none"}},children:[(0,D.jsxs)(i.ZP,{id:"tips",open:!!e8,anchorEl:e8,disableRestoreFocus:!0,sx:{pointerEvents:"none"},anchorOrigin:{vertical:"bottom",horizontal:"center"},children:[(0,D.jsx)("img",{alt:"",src:"/images/filter.png",width:"200"}),(0,D.jsx)(p.Z,{sx:{p:2},children:"可在每一列右上角添加筛选器进行高级检索"})]}),(0,D.jsx)(d.Z,{onClick:ne,onMouseEnter:ne,onMouseLeave:function(){e7(null)},sx:{fontSize:11,width:"100%"},children:"高级检索"})]})]})}),(0,D.jsx)(f.Z,{sx:{flex:1,width:"100%"},children:(0,D.jsx)(s.s,{getRowId:function(e){return e.id},initialState:{sorting:{sortModel:[{field:"dates",sort:"asc"}]},filter:{filterModel:{items:"undefined"!=typeof location&&location.search?location.search.startsWith("?tag=")?[{columnField:"tags",value:decodeURIComponent(location.search.split("=")[1])}]:location.search.startsWith("?author=")?[{columnField:"authors",value:decodeURIComponent(location.search.split("=")[1])}]:[]:[]}}},localeText:l.U.components.MuiDataGrid.defaultProps.localeText,getRowHeight:function(){return"auto"},rows:nn,columns:Y,pageSize:100,rowsPerPageOptions:[100],disableSelectionOnClick:!0})})]})]}):null}J.getLayout=function(e){return(0,D.jsx)(c.Z,{children:e})}},7380:function(e,n,t){"use strict";t.d(n,{Qy:function(){return o},zc:function(){return a}});var r,i,o=((r={}).articleCategory="文稿大类",r.articleType="文稿类型",r.place="地点",r.character="人物",r.issuer="出版方/发行方",r.subject="主题/事件",r.recorder="记录",r.reviewer="审核",r.translator="翻译",r.reprint="翻印/传抄",r),a=((i={}).appellation="appellation",i.title="title",i.authors="authors",i.place="place",i.subtitle="subtitle",i.subtitle2="subtitle2",i.subtitle3="subtitle3",i.subtitle4="subtitle4",i.subtitle5="subtitle5",i.subdate="subdate",i.paragraph="paragraph",i.quotation="quotation",i.signature="signature",i.image="image",i.image_description="image_description",i)},5615:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles",function(){return t(2946)}])}},function(e){e.O(0,[738,771,386,916,120,794,774,888,179],function(){return e(e.s=5615)}),_N_E=e.O()}]);